# ./.tmuxinator.yml

name: nomad-development-environment

on_project_exit:
  sudo killall nomad; sudo killall consul

# Runs after everything. Use it to attach to tmux with custom options etc.
# post: tmux -CC attach -t nomad-local

tmux_options: -f tmux_options.conf

windows:
  - editor:
      layout: main-vertical
      panes:
        - nomad-job-run: 
          - echo -e "\n\n\e[30;46m--- TO EXIT SESSION ---\e[m Ctrl-B + :kill-session + Enter"
          - ./nomad_run_local_infra.sh
        - nomad-agent:
          - sudo nomad agent -config="nomad-agent-conf.nomad" -dev-connect
        - consul-agent:
          - sudo consul agent -dev
